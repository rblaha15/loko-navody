name: Deploy to Firebase Hosting on merge

'on':

    push

jobs:

    build_and_deploy:

        runs-on: ubuntu-latest

        steps:

            - uses: actions/checkout@v3

            - name: Setup Pages

              uses: actions/configure-pages@v3

            - name: Build with Jekyll

              uses: actions/jekyll-build-pages@v1

              with:

                source: ./

                destination: ./_site

            - name: Upload artifact

              uses: actions/upload-pages-artifact@v1

            - uses: FirebaseExtended/action-hosting-deploy@v0

              with:

                  repoToken: '${{ secrets.GITHUB_TOKEN }}'

                  firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_LOKO_NAVODY }}'

                  channelId: live

                  projectId: loko-navody
